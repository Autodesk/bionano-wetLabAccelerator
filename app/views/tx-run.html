<div class="column-wrap">

  <div class="column-8 div-centered">
    <h4 class="thin" ng-show="!!runCtrl.processing">Processing...</h4>
  </div>

  <form name="protocolRunInfo" class="column-8 div-centered">
    <fieldset ng-disabled="runCtrl.txCredInvalid">

      <input type="text"
             class="input-unstyled"
             ng-model="runCtrl.runTitle"
             placeholder="Run Title...">

      <div dropdown
           dropdown-append-to-body>
        <span ng-bind="runCtrl.project.name"></span>
        <input type="text"
               ng-if="creatingNewProject"
               ng-model="runCtrl.project"
               placeholder="Project Name...">
        <a class="field-action-text"
           dropdown-toggle
           ng-bind="runCtrl.project ? 'change...' : 'select...'"></a>
        <ul class="dropdown-menu"
            style="z-index: 999999">
          <li ng-if="!runCtrl.projects.length">
            <a>Loading...</a>
          </li>
          <li ng-repeat="proj in runCtrl.projects">
            <a ng-bind="proj.name"
               ng-click="runCtrl.selectProject(proj)"></a>
          </li>
          <li class="divider"></li>
          <li>
            <a ng-click="runCtrl.project = ''; creatingNewProject = true;">Create new project...</a>
          </li>
        </ul>
      </div>

      <div class="pull-right">
        <button class="btn action-button"
                ng-disabled="!(runCtrl.runTitle && runCtrl.project && runCtrl.protocol && transcripticCred.$valid)"
                ng-click="runCtrl.analyze()">Verify
        </button>

        <button class="btn action-button"
                ng-disabled="!(runCtrl.runTitle && runCtrl.project && runCtrl.protocol && transcripticCred.$valid)"
                ng-click="runCtrl.startRun()">Run
        </button>
      </div>

    </fieldset>
  </form>

  <div class="column-8 div-centered"
       ng-show="runCtrl.response.quote">
    <table>
      <tr>
        <td>Run Title</td>
        <td ng-bind="config.runTitle"></td>
      </tr>
      <tr>
        <td>Project Name</td>
        <td ng-bind="config.runProject.name"></td>
      </tr>
      <tr ng-repeat="item in response.quote.items">
        <td ng-bind="item.title"></td>
        <td ng-bind="item.cost"></td>
      </tr>
      <tr>
        <td>Tax Rate</td>
        <td ng-bind="response.quote.tax_rate"></td>
      </tr>
      <tr>
        <td>Total Cost</td>
        <td ng-bind="response.total_cost"></td>
      </tr>
    </table>

    <button class="btn action-button"
            ng-click="runCtrl.submit()">Run it!
    </button>
  </div>

  <div class="column-8 div-centered">
    <tx-cred-transcriptic ng-form="transcripticCred"></tx-cred-transcriptic>
  </div>
</div>

