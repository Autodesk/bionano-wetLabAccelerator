<div class="operation-verification" ng-show="opCtrl.verification">
  <span class="glyphicon glyphicon-alert"></span>
</div>
<div class="operation-name"
     ng-click="opCtrl.isCollapsed = !opCtrl.isCollapsed"
     ng-class="{'open': opCtrl.isCollapsed}">
  <span ng-bind="opCtrl.op.operation"></span>
  <div class="dropdown"
       ng-class="{'open' :showActions}" >
    <span class="glyphicon glyphicon-cog"
          ng-show="opCtrl.isCollapsed"
          ng-click="opCtrl.toggleActionsMenu($event)"></span>
    <ul class="dropdown-menu"
        ng-mouseleave="opCtrl.toggleActionsMenu($event)">
      <li><a ng-click="opCtrl.toggleModal($event)">
          Verify Protocol
      </a></li>
      <li><a ng-click="opCtrl.toggleJsonEditing($event)">
          Show JSON
      </a></li>
      <li><a ng-click="deleteStep()">
          Delete Step
        </a></li>
    </ul>
  </div>
</div>
<tx-modal ng-show='modalShown'>
  <tx-run></tx-run>
</tx-modal>
<div class="operation-field"
     ng-show="opCtrl.isCollapsed"
     ng-class="{'open': opCtrl.isCollapsed}">
  <tx-protocol-field ng-repeat="field in opCtrl.op.fields"
                     ng-model="field.value"
                     field="field">
  </tx-protocol-field>
</div>
<div class="pre-scrollable modal-background"
     ng-class="{'open' : jsonEditing}">
  <span class="modal-close"
        ng-click="jsonEditing = false">&times</span>
  <pre json-editor
      ng-if="jsonEditing"
      contenteditable
      json-editor-active="{{jsonEditing}}"
      name="ProtocolStepEditor"
      ng-model="opCtrl.op"
      ng-model-options="{updateOn: 'blur'}">
  </pre>
</div>
