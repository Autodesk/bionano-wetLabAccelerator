<div class="col-md-3">
  <div class="panel panel-default">
    <div class="panel-heading">
      Projects
      <button class="btn btn-default btn-sm btn-middle pull-right"
              ng-class="{'btn-primary' : showNewProject}"
              ng-click="showNewProject = !showNewProject">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
    </div>
    <div class="list-group">
      <div class="list-group-item"
           ng-show="showNewProject">
        <div class="input-group">
          <input type="text"
                 class="form-control"
                 ng-model="newProjectName">
          <div class="input-group-btn">
            <button class="btn btn-default"
                    ng-disabled="!newProjectName"
                    ng-click="mainCtrl.addProject(newProjectName); newProjectName = ''; showNewProject = false;">
              <span class="glyphicon glyphicon-plus"></span>
            </button>
          </div>
        </div>
      </div>
      <a class="list-group-item"
         ng-repeat="p in mainCtrl.projects"
         ng-click="mainCtrl.project = p.url"
         ng-class="{'active' : p.url == mainCtrl.project}"
         ng-bind="p.name"></a>
    </div>
  </div>
</div>

<div class="col-md-9">
  <div class="pagination pagination-sm">
    <li ng-repeat="p in mainCtrl.protocols"
        ng-class="{'active' : p == mainCtrl.selectedProtocol}">
      <a ng-bind="p"
         ng-click="mainCtrl.retrieve(p)"></a>
    </li>
  </div>

  <form class="form-inline" style="margin-bottom: 20px;">
    <div class="form-group">
      <div class="input-group">
        <span class="input-group-addon">Run Title</span>
        <input type="text"
               class="form-control"
               ng-model="mainCtrl.runTitle">
      </div>
    </div>

    <div class="btn-group"
         tooltip="{{mainCtrl.canSubmitRun() ? '' : 'select a project + run title'}}"
         tooltip-append-to-body="true">
      <button class="btn btn-primary"
              ng-disabled="!mainCtrl.canSubmitRun()"
              ng-click="mainCtrl.analyze()">Verify + Price</button>
      <button class="btn btn-primary"
              ng-disabled="!mainCtrl.canSubmitRun()"
              ng-click="mainCtrl.submit()">Submit</button>
    </div>
  </form>

  <div ng-show="analysisResponse"
       class="alert protocol-response"
       ng-class="{'alert-success' : !analysisResponse.error,
                  'alert-warning' : analysisResponse.error}">
    <span class="text-corner">Verification</span>
    <div ng-show="runResponse.processing">
      Processing Verification...
    </div>
    <div ng-hide="runResponse.processing">
      <div ng-hide="analysisResponse.error">
        <p><strong>Protocol valid</strong></p>
        <p>cost: {{runResponse.response.total_cost}}</p>
      </div>
      <div ng-show="analysisResponse.error">
        <p>Problems with Protocol listed below:</p>
        <pre ng-bind="analysisResponse.response | json"></pre>
      </div>
    </div>
  </div>

  <div ng-show="runResponse"
       class="alert protocol-response"
       ng-class="{'alert-success' : !runResponse.error,
                  'alert-danger' : runResponse.error}">
    <span class="text-corner">Run</span>
    <div ng-show="runResponse.processing">
      Processing Run...
    </div>
    <div ng-hide="runResponse.processing">
      <div ng-hide="runResponse.error">
        <p><strong>Protocol initiated</strong></p>
        <p>cost: {{runResponse.response.total_cost}}</p>
      </div>
      <div ng-show="runResponse.error">
        <p>There was an error running your protocol:</p>
        <pre ng-bind="runResponse.response | json"></pre>
      </div>
    </div>
  </div>

  <hr>

  <tx-protocol protocol="mainCtrl.exampleProtocol"></tx-protocol>

</div>
