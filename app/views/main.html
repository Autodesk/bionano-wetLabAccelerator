<div class="row">
  <div class="col-md-3">
    <tx-projectlist ng-model="mainCtrl.project"></tx-projectlist>
  </div>

  <div class="col-md-9">
    <div class="btn-toolbar"
         style="margin-bottom: 20px;">
      <div class="btn-group">
        <a class="btn btn-default"
           ng-repeat="p in mainCtrl.firebaseProtocols"
           ng-class="{'active' : p.$id == mainCtrl.protocol.$id}"
           ng-bind="p.meta.name || p.$id"
           ng-click="mainCtrl.retrieveFirebase(p)"></a>
      </div>
      <div class="btn-group">
        <a class="btn btn-default"
           ng-click="mainCtrl.newProtocol()">New Protocol</a>
      </div>
    </div>

    <form class="form-inline" style="margin-bottom: 20px;">
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">Run Title</span>
          <input type="text"
                 class="form-control"
                 ng-model="mainCtrl.runTitle">
        </div>
      </div>

      <div class="btn-group"
           tooltip="{{mainCtrl.canSubmitRun() ? '' : 'select a project + run title'}}"
           tooltip-append-to-body="true">
        <button class="btn btn-info"
                ng-disabled="!mainCtrl.canSubmitRun()"
                ng-click="mainCtrl.analyze()">Verify + Price</button>
        <button class="btn btn-info"
                ng-disabled="!mainCtrl.canSubmitRun()"
                ng-click="mainCtrl.submit()">Submit</button>
      </div>
    </form>

    <tx-requestresponse config="analysisResponse.config"
                        response="analysisResponse.response"></tx-requestresponse>

    <tx-requestresponse config="runResponse.config"
                        response="runResponse.response"></tx-requestresponse>

  </div>
</div>

<tx-protocol ng-if="mainCtrl.protocol"
             protocol="mainCtrl.protocol.protocol"
             on-save="mainCtrl.saveProtocolToFirebase($protocol, $meta)"
             on-delete="mainCtrl.deleteFirebaseProtocol(mainCtrl.protocol.$id)"
             meta="mainCtrl.protocol.meta"></tx-protocol>
